# 뿌리오 SMS 연동 가이드

## 1. 뿌리오 계정 설정

### 1-1. 계정 생성
- [뿌리오 홈페이지](https://www.ppurio.com) 접속
- 회원가입 및 사업자 인증 완료

### 1-2. API 키 발급
1. 뿌리오 관리자 페이지 로그인
2. [API 설정] 메뉴 접속
3. API Key 발급 및 복사

### 1-3. 발신번호 등록
1. [발신번호 관리] 메뉴 접속
2. 1866-1845 번호 등록
3. 서류 제출 및 승인 대기

## 2. 환경변수 설정

`.env.local` 파일에 다음 환경변수 추가:

```env
# 뿌리오 SMS API
PPURIO_ACCOUNT_ID=your_account_id
PPURIO_API_KEY=your_api_key
PPURIO_FROM_NUMBER=18661845
```

## 3. 메시지 전송 흐름

1. 고객이 CareonApplicationForm 작성 완료
2. Supabase에 데이터 저장
3. `/api/sms/send` API 호출
4. 뿌리오 API를 통해 SMS 전송
5. 고객에게 접수 완료 메시지 전달

## 4. 메시지 템플릿

### 신청 완료 메시지
```
[케어온]
{고객명}님, 스타트케어 신청이 완료되었습니다.

담당자가 곧 연락드릴 예정입니다.
업종: {업종명}

문의: 1866-1845
```

## 5. 테스트 방법

1. 개발 환경에서 테스트용 계정 사용
2. 실제 휴대폰 번호로 테스트
3. 뿌리오 관리자 페이지에서 전송 내역 확인

## 6. 주의사항

- **발신번호 사전등록 필수**: 통신사 정책상 미등록 번호는 발송 불가
- **API Key 보안**: 절대 GitHub에 직접 커밋하지 않기
- **일일 발송 한도**: 계정별로 제한이 있을 수 있음
- **SMS 실패 처리**: SMS 실패해도 신청은 정상 처리되도록 구현됨

## 7. 트러블슈팅

### SMS가 전송되지 않는 경우
1. 환경변수 설정 확인
2. 발신번호 승인 상태 확인
3. API Key 유효성 확인
4. 뿌리오 계정 잔액 확인

### 에러 로그 확인
```bash
# Vercel 로그 확인
vercel logs --follow

# 로컬 개발 환경
npm run dev
# 브라우저 개발자 도구 콘솔 확인
```

## 8. 비용 정보

- SMS (90바이트 이하): 건당 약 10-15원
- LMS (90바이트 초과): 건당 약 30-50원
- 대량 발송 시 할인 적용 가능

## 9. API 제한사항

- 초당 최대 10건
- 일일 최대 발송량은 계정 등급별 상이
- 야간 시간대(21:00~08:00) 광고성 메시지 발송 제한

## 10. 추가 기능 (향후 구현 가능)

- [ ] 예약 발송 기능
- [ ] 대량 발송 기능
- [ ] 발송 결과 Webhook 연동
- [ ] 발송 통계 대시보드
- [ ] 템플릿 관리 시스템